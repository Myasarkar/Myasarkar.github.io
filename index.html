<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Yolculuk Ücret Hesaplama</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 20px;
        }
        input[type="text"] {
            width: calc(50% - 20px);
            padding: 8px;
            margin: 5px auto; /* Dikey hizalama */
            display: block; /* Satır sonu geçişi sağlamak için */
        }
        button {
            padding: 10px 20px;
            background-color: #007bff;
            color: #fff;
            border: none;
            cursor: pointer;
        }
        #map {
            display: none;
            width: 100%;
            height: 300px;
            margin-bottom: 20px;
        }
        #floating-panel {
            text-align: center; /* Yatay hizalama */
        }
        #result {
            margin-top: 20px;
            font-weight: bold;
        }
    </style>
</head>
<body>
    <h1>Yolculuk Ücret Hesaplama</h1>
    <div id="map"></div>
    <div id="floating-panel">
        <strong>Başlangıç Konumu:</strong>
        <input id="origin-input" type="text" placeholder="Başlangıç">
        <strong>Varış Konumu:</strong>
        <input id="destination-input" type="text" placeholder="Varış">
        <button id="submit">Yolculuk Hesapla</button>
    </div>
    <div id="result"></div>

    <script>
        function initMap() {
            var map = new google.maps.Map(document.getElementById('map'), {
                center: {lat: 41.0082, lng: 28.9784}, // Istanbul koordinatları
                zoom: 12
            });

            var directionsService = new google.maps.DirectionsService;
            var directionsDisplay = new google.maps.DirectionsRenderer;

            var originInput = document.getElementById('origin-input');
            var destinationInput = document.getElementById('destination-input');
            var originAutocomplete = new google.maps.places.Autocomplete(originInput, {types: ['geocode'], componentRestrictions: {country: 'tr'}, strictBounds: true});
            var destinationAutocomplete = new google.maps.places.Autocomplete(destinationInput, {types: ['geocode'], componentRestrictions: {country: 'tr'}, strictBounds: true});

            document.getElementById('submit').addEventListener('click', function() {
                calculateAndDisplayRoute(directionsService, directionsDisplay);
            });

            function calculateAndDisplayRoute(directionsService, directionsDisplay) {
                var origin = originInput.value;
                var destination = destinationInput.value;

                if (origin && destination) {
                    map.setCenter({lat: 41.0082, lng: 28.9784}); // Istanbul koordinatları
                    map.setZoom(12);

                    directionsDisplay.setMap(map);
                    directionsService.route({
                        origin: origin,
                        destination: destination,
                        travelMode: 'DRIVING'
                    }, function(response, status) {
                        if (status === 'OK') {
                            directionsDisplay.setDirections(response);
                            document.getElementById('map').style.display = 'block';

                            var route = response.routes[0];
                            var distance = 0;
                            for (var i = 0; i < route.legs.length; i++) {
                                distance += route.legs[i].distance.value;
                            }
                            var distanceInKm = distance / 1000;
                            var fare = Math.max(90, distanceInKm * 15); // Minimum ücret 90 TL
                            fare += 25; // 25 TL ekleniyor
                            document.getElementById('result').innerHTML = 'Yolculuk Mesafesi: ' + distanceInKm.toFixed(2) + ' km<br>Yolculuk Ücreti: ' + fare.toFixed(2) + ' TL';
                        } else {
                            window.alert('Yolculuk bulunamadı: ' + status);
                        }
                    });
                } else {
                    window.alert('Lütfen başlangıç ve varış konumlarını girin.');
                }
            }
        }
    </script>
    <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyDttMN5Dn161lJnEHeYQTasLutrkTQpw88&libraries=places&callback=initMap"
    async defer></script>
</body>
</html>
